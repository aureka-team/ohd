<h1><%= link_to 'Benutzerverwaltung', admin_user_management_url %></h1>
<h2><%= "#{object.first_name} #{object.last_name} &mdash; #{object.email}" %></h2>

<% form_for [:admin, object], :html => {  } do |f| %>
  <table class='userTable' cellspacing='0' cellpadding='0' border='0'>
    <tbody>
      <tr>
        <td>
          <strong>Status:</strong> <%= "#{t(object.current_state.to_sym, :scope => "devise.workflow_states")}" %>
        </td>
        <td style='text-align: right; padding-left: 5px;'>
          <span class='user-dates' style='text-align: right; float: none;'>
            <strong><%= t(:requested_at, :scope => "devise.registration_fields") %>:</strong>
            <%= object.created_at.nil? ? '?' : object.created_at.strftime("%d.%m.%y %H:%M") %>
          </span>          
        </td>
      </tr>
    </tbody>
  </table>

  <hr class="user-divider" />

  <%#TODO: edit user information %>
  <% if FileTest.exists?(File.join(RAILS_ROOT, 'app', 'views', 'users', '_application_info.html.erb')) %>
    <%=  render :partial => '/users/application_info', :object => object %>
  <% else %>
    <% object.form_parameters.each do |field_name, value| %>
      <strong><%= field_name %>:</strong> <%= value %><br />
    <% end %>
  <% end %>

  <hr class="user-divider" />

  <strong><%= t("tos_agreement", :scope => "devise.registration_fields") %>:</strong>
  <%= object.tos_agreement ? 'zugestimmt' : 'keine Zustimmung' %><br />
  <strong>Anmerkungen:</strong><br />
  <%= f.text_area :admin_comments, :style => "height: 50px;" %><br />

  <%= hidden_field_tag :workflow_event, '', :id => "workflow_event" %>

  <% object.current_state.events.each do |event, workflow| %>
    <%= submit_tag "#{t(event.to_sym, :scope => "devise.workflow_events")}", :name => event, :onclick => "$('workflow_event').value = '#{event}';" %>
  <% end %>
<% end %>
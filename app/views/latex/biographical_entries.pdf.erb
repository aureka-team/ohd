<% interviewee_first_name = "#{@interview.interviewees.first.first_name(@locale)}" %>
<% interviewee_last_name = "#{@interview.interviewees.first.last_name(@locale)}" %>
<% interviewee_name = "#{interviewee_first_name} #{interviewee_last_name}" %>
<% title = "#{I18n.translate('activerecord.models.biographical_entry.one', locale: @locale)} #{interviewee_name}" %>
<% header_text =  "#{I18n.translate('biographical_entries_of', locale: @locale)} #{interviewee_name} (#{I18n.translate('archive_id', locale: @locale)} #{@interview.archive_id})" %>

\title{<%= title %>}

\begin{document}

<%= render partial: "./latex/header_footer",
           locals: {
               header_text: header_text
           } %>
<%= render partial: "./latex/title",
           locals:
               {
                   title: title,
                   space_above: 0.4,
                   space_below: 0.4,
                   font_size: 18,
               } %>

<% @interview.interviewees.first.biographical_entries.with_public_state.each do |biographical_entry| %>
  <% start_date = Date.parse(biographical_entry.translations.where(locale: @project_locale).first.start_date).strftime("%d.%m.%Y") rescue nil %>
  <% end_date = Date.parse(biographical_entry.translations.where(locale: @project_locale).first.end_date).strftime("%d.%m.%Y") rescue nil %>
  <% title = [start_date, end_date].compact.join(' - ') || '' %>
  <%= render partial: "./latex/title",
             locals:
                 {
                     title: latex_escape(title),
                     space_above: 0.4,
                     space_below: 0,
                     font_size: 13,
                 } %>
  <% text = biographical_entry.translations.where(locale: @project_locale).first.text %>
  \par{<%= latex_escape(ActionView::Base.full_sanitizer.sanitize(text).gsub("&amp;", "&")) %>}
<% end %>



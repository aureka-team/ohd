<%
  interviewee_name = "#{@interview.interviewees.first.first_name(@locale)} #{@interview.interviewees.first.last_name(@locale)}"
  title = "#{I18n.t('biographical_entries_title', interviewee_name: interviewee_name, archive_id: @interview.archive_id, locale: @locale)}"
  header_text = "#{I18n.t('biographical_entries_header', interviewee_name: interviewee_name, archive_id: @interview.archive_id, locale: @locale)}"
%>

\title{<%= title %>}

\begin{document}

<%= render partial: "./latex/header_footer",
           locals: {
               header_text: header_text
           } %>
<%= render partial: "./latex/title",
           locals:
               {
                   title: title,
                   space_above: 0.4,
                   space_below: 0.4,
                   font_size: 14,
               } %>

<% @interview.interviewees.first.biographical_entries.with_public_state.each do |biographical_entry| %>
  <% start_date = Date.parse(biographical_entry.start_date(@locale)).strftime("%d.%m.%Y") rescue biographical_entry.start_date(@locale) %>
  <% end_date = Date.parse(biographical_entry.end_date(@locale)).strftime("%d.%m.%Y") rescue biographical_entry.end_date(@locale) %>
  <% title = [start_date, end_date].compact.join(' - ') || '' %>
  <%= render partial: "./latex/title",
             locals:
                 {
                     title: latex_escape(title),
                     space_above: 0.4,
                     space_below: 0,
                     font_size: 12,
                 } %>

  <%= raw biographical_entry.for_latex(@locale) %>
<% end %>

<div id="segment_annotation_<%= segment_annotation.id || 'new' -%>">
  <%= modal_window_close_button_on_javascript_request -%>
  <h2>Annotation zu Segment <%= segment_annotation.media_id %></h2>
  <div>
    <% form_url = @object.new_record? ? create_annotation_user_contents_path(:method => :post) : update_annotation_user_content_path(@object) %>
    <% remote_form_for @object,
                       :url => form_url,
                       :before => "new Effect.Fade('modal_window'); $('ajax-spinner').show();",
                       :complete => "new Effect.Fade('shades');",
                       :html => { :id => "annotations_form" } do |f| %>
        <label><%= t(:user_annotation, :scope => 'user_interface.user_content') -%></label>
        <%= f.text_area :text %>
        <div class="hint" style="width: 165px; margin-top: 80px; display: inline; clear: none;"><%= t(:annotation_explanation, :scope => 'user_interface.user_content') -%></div>
        <label id="workflow_state_label" name="workflow_state" class="checkbox">
          <%= check_box_tag 'raw_workflow_state', 'shared', !@object.private?, { :class => @object.private? ? 'private' : 'shared', :onclick => "$('user_annotation_workflow_state').value = $('raw_workflow_state').checked ? 'shared' : 'private'; $('raw_workflow_state').toggleClassName('shared');"} %>
          <%= t(:publish_annotation, :scope => 'user_interface.user_content') %>
        </label>
        <%= hidden_field_tag 'user_annotation[workflow_state]', @object.private? ? 'private' : 'shared' -%>
        <%= hidden_field_tag 'user_annotation[media_id]', segment_annotation.media_id %>
        <%= f.submit t(:update, :scope => 'user_interface.actions'), :onclick => "new Effect.Fade('modal_window'); $('ajax-spinner').show(); $('topics_form').request(); return false;" %>
    <% end %>
  </div>
</div>
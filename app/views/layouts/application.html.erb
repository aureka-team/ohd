<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
<head>
    <%= render :partial => '/head' %>
    <%= javascript_include_tag 'search', :cache => 'search' %>
    <%= javascript_include_tag 'map', :cache => 'map' %>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=<%= @locale || 'de' -%>"></script>
</head>

<body id="<%= current_area_id %>">
    <div id="headerIdentityWrapper">
        <%= render :partial => '/header' %>

        <div id="baseServices">
            <%= render :partial => 'searches/search', :object => (@search ||= Search.from_params) %>
        </div>

        <hr class="divider" />
    </div>

    <div id="mainWrapper">

        <div id="overlay" style="display: none; background-color: #F1F1EB;">
          <div id="ajax-spinner">&nbsp;</div>
        </div>

        <div id="baseContent">

            <a name="inhalt" accesskey="I"></a>

            <div id="innerContent">
                <% unless flash[:alert].blank? %>
                  <div id="flashAlert">
                  <%= flash[:alert] %>
                  </div>
                <% end %>
                <%= yield %>
            </div>

            <br class="clear spacer" />
            <a href="#seitenanfang" title="Zum Seitenanfang"><img src="<%= image_path 'sprungmarke.gif' %>" alt="Bild Sprungmarke nach oben" border="0" title="" /></a>
            <br class="clear" />

            <div class="clear"></div>
        </div>

        <hr class="divider" />

        <div id="baseContainerRight">

            <% javascript_tag do %>
              var categoryChange = false;
              var checkedCategories = [];
              var categoryElems = [];

              // clearing the fulltext field before submission or editing
              function clearFulltextField(id) {
                var elem = $(id);
                if(elem) {
                  if(elem.value == '<%= t('search_term') %>') {
                    elem.value = '';
                  }
                }
              }

              checkedCategories.each(function(id) {
                  categoryState(id, true, true);
              });
              
            <% end %>

            <%= render :partial => 'searches/facets', :object => @search %>

            <% javascript_tag do %>

              categoryElems = $$('fieldset.facet-field');

            <% end %>

        </div>

        <div id="mainWrapperClear">&nbsp;</div>

    </div>

    <hr class="divider" />

    <div id="baseContainerFooter">
        <%= render :partial => '/footer' %>
    </div>

    <a name="seitenende" accesskey="u"></a>

    <hr class="divider" />

    <div id="printlogo">
        <p class="info"><em>Diese Grafiken werden nur in der Druckvorschau verwendet:</em></p>
        <img src="<%= image_path 'zwar_logo_print.gif' %>" border="0" width="262" height="73" title="Druckversion des Logos" alt="Druckversion des Logos" />
    </div>

</body>
</html>

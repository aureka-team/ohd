<%= javascript_include_tag "jwplayer" %>
<%= javascript_tag "var headings = null;" %>


<!--<div id="leftColumn">-->

  <!--
  <div id="tabsVideo">
    <ul>
      <% if @interview.video == 'Video' %>
        <li id="tabHigh" class="active">
          <p onclick="currentPlayer = players['player_high']; Element.show('playerHigh'); Element.hide('playerLow'); Element.addClassName('tabHigh', 'active'); Element.removeClassName('tabLow', 'active');">Video (hohe Qualität)</p>
        </li>
        <li id="tabLow">
          <p onclick="currentPlayer = players['player_low'];Element.show('playerLow'); Element.addClassName('tabLow', 'active'); Element.hide('playerHigh'); Element.removeClassName('tabHigh', 'active');">Video (mittlere Qualität)</p>
        </li>
      <% else %>
        <li id="tabAudio" class="active"><p>Audio</p></li>
      <% end %>
    </ul>
  </div>

  <br class="clear" />
  //-->
  
  <div id="containerHigh" class="containerVideo">

    <% if @interview.video == 'Video' %>

    <div id="playerHigh" class="playerContainer">
      <div id="mediaspace_high" class="player">
        <h4><%= t(:player_not_loaded, :scope => 'user_interface.messages') %></h4>
        <noscript>
          <p><%= t(:no_javascript, :scope => 'user_interface.messages') %></p>
        </noscript>
        <script type="text/javascript">
          document.writeln(<%= t(:check_flash_version, :scope => 'user_interface.messages') %>);
        </script>
      </div>
    </div>

    <div id="playerLow" class="playerContainer" style="display: none;">
      <div id="mediaspace_low" class="player">
        <h4><%= t(:player_not_loaded, :scope => 'user_interface.messages') %></h4>
        <noscript>
          <p><%= t(:no_javascript, :scope => 'user_interface.messages') %></p>
        </noscript>
        <script type="text/javascript">
          document.writeln('<%= t(:check_flash_version, :scope => 'user_interface.messages') %>');
        </script>
      </div>
    </div>
    
    <% else %>

    <div id="playerAudio" class="playerContainer">
      <div id="mediaspace_audio" class="player">
        <h4><%= t(:player_not_loaded, :scope => 'user_interface.messages') %></h4>
        <noscript>
          <p><%= t(:no_javascript, :scope => 'user_interface.messages') %></p>
        </noscript>
        <script type="text/javascript">
          document.writeln(<%= t(:check_flash_version, :scope => 'user_interface.messages') %>);
        </script>
      </div>
    </div>

    <% end %>

    <div class="playerControl">
        <div id="language_select">
          <% if @interview.language.downcase == 'deutsch' %>
            <a id="original" class="captions_orig active" href="javascript:void(0);"><%= @interview.languages.map{|f| (t(f, :scope => 'categories.languages').downcase)}.join(' / ') %></a>
          <% else %>
            <%= link_to((@interview.languages.map{|f| (t(f, :scope => 'categories.languages').downcase)}.join(' / ')), 'javascript:currentPlayer.setCaptionsLanguage("original")', :id => "original", :class => "captions_orig active", :onClick => "$('original').addClassName('active');$('translated').removeClassName('active');") %>
            <% if @interview.translated? %>
              <%= link_to(t('Deutsch', :scope => 'categories.languages').downcase, 'javascript:currentPlayer.setCaptionsLanguage("de")', :id => "translated", :class => "captions_trans", :onClick => "$('original').removeClassName('active');$('translated').addClassName('active');") %>
            <% else %>
              <a id="translated" class="captions_trans disabled" href="javascript:void(0);"><%= t('Deutsch', :scope => 'categories.languages').downcase %></a>
            <% end %>
          <% end %>
        </div>
        <div id="volumeMuteButton" class="unmute" onClick="currentPlayer.toggleMute();"></div>
        <div id="volumeSelect">
          <div id="volumeOn"></div>
        </div>

        <div class="interviewinfo"><%= @interview.video ? t(:video, :scope => 'media') : t(:audio, :scope => 'media') %>: <%= "#{@interview.duration.minimal}" %></div>
        <div class="itemselection">
          <%= t(:tape, :scope => 'media') %>:
          <select id="player_item" name="player_item" onChange="currentPlayer.changeItem(this.value);">
          <% @interview.tapes.count.times do |item| %>
            <option value="<%= item %>"><%= (item+1) %> <%= t(:of_tapes, :scope => 'media') %> <%= @interview.tapes.count %></option>
          <% end %>
          </select>
        </div>
    </div>

    <div id="captions_wrapper">
        <div id="captions">
          <div id="captions-0" class="captions-slide"></div>
          <div id="captions-1" class="captions-slide"></div>
          <div id="captions-2" class="captions-slide"></div>
        </div>
        <!--
        <div class="back">
            <%= link_to_function(t('back', :scope => 'user_interface.player'), 'void(0);') %>
        </div>
        <div class="forward">
            <%= link_to_function(t('forward', :scope => 'user_interface.player'), 'void(0);') %>
        </div>
        //-->
    </div>

    <% javascript_tag do %>

      var headings = null;

      var playerSettings = {
        id                        : '',
        jwplayerSpace             : '',
        jwplayerFile              : '/swf/player.swf',
        captionsPluginFile        : '/swf/captions.swf',
        skin                      : '/swf/zwar.swf',
        height                    : '335',
        width                     : '400',
        backcolor                 : '990000',
        frontcolor                : '821111',
        lightcolor                : 'ffffff',
        headingsTable             : 'headings',
        captionsSpace             : 'captions',
        captionsLanguage          : 'original', // 'original', 'de'
        whilePlaying              : fadeOutGallery,
        onVolume                  : 'drawVolumeBar(this.volume)',
        onMute                    : 'drawMuteButton(this.mute)',
        slideClass                : 'captions-slide',
        call_item                 : 'if(currentPlayer==this){$("player_item").selectedIndex = this.item;};',
        startItem                 : <%= params['item'] == nil ? "null" : (params['item'].to_i - 1) %>,
        startPosition             : <%= params['position'] == nil ? "null" : params['position'].to_i %>
      };

      <% if @interview.video == 'Video' %>

        // high quality video player
        playerSettings.id = 'player_high';
        playerSettings.jwplayerSpace = 'mediaspace_high';
        var player_high = new Player("<%= playlist_high_interview_tapes_path(@interview, :format => :xml) %>", playerSettings);

        // low quality video player
        playerSettings.id = 'player_low';
        playerSettings.jwplayerSpace = 'mediaspace_low';
        var player_low = new Player("<%= playlist_low_interview_tapes_path(@interview, :format => :xml) %>", playerSettings);

      <% else %>

        // audio player
        playerSettings.id = 'player_audio';
        playerSettings.jwplayerSpace = 'mediaspace_audio';
        var player_audio = new Player("<%= playlist_audio_interview_tapes_path(@interview, :format => :xml) %>", playerSettings);

      <% end %>

    <% end %>
	</div>

<% javascript_tag do %>
  Event.observe('volumeSelect', 'click', setVolume);
<% end %>